
(defn angle [v]
  "Angle of v in degrees as in polar coordinate system"
  (% (degrees (apply arctan2 (list (reversed v)))) 180))

(def path1 [[[  0.16338942  11.341288  ] [  0.33148442  10.903238  ] [  0.54006692  10.23421298] [  0.74070692   9.50921295]]
            [[  0.74070692   9.50921295] [  0.94134692   8.78421293] [  1.13404441   8.0032379 ] [  1.2703694    7.3412879 ]]
            [[  1.2703694    7.3412879 ] [  1.4066994    6.6793379 ] [  1.5890269    5.7963129 ] [  1.7729569    4.9069004 ]] 
            [[  1.7729569    4.9069004 ] [  1.9568869    4.0174879 ] [  2.1424194    3.1216879 ] [  2.2851594    2.4341879 ]] 
            [[  2.2851594    2.4341879 ] [  2.4751694    1.5190129 ] [  2.72523377   0.8707504 ] [  2.99344971   0.47454884]] 
            [[  2.99344971   0.47454884] [  3.26166565   0.07834728] [  3.54803315  -0.06579334] [  3.8106494    0.02727542]] 
            [[  3.8106494    0.02727542] [  4.07326565   0.12034417] [  4.31213065   0.45062229] [  4.48534159   1.00325823]] 
            [[  4.48534159   1.00325823] [  4.65855252   1.55589417] [  4.7661094    2.33088791] [  4.7661094    3.3133879 ]] 
            [[  4.7661094    3.3133879 ] [  4.7661094    3.8765879 ] [  4.7661094    4.4397879 ] [  4.7661094    5.0029879 ]] 
            [[  4.7661094    5.0029879 ] [  4.7661094    5.5661879 ] [  4.7661094    6.1293879 ] [  4.7661094    6.6925879 ]] 
            [[  4.7661094    6.6925879 ] [  5.36100437   6.78087957] [  5.95589933   6.86917123] [  6.5507943    6.9574629 ]] 
            [[  6.5507943    6.9574629 ] [  7.14568927   7.04575457] [  7.74058423   7.13404623] [  8.3354792    7.2223379 ]] 
            [[  8.3354792    7.2223379 ] [  8.93037417   7.31062957] [  9.52526913   7.39892123] [ 10.1201641    7.4872129 ]] 
            [[ 10.1201641    7.4872129 ] [ 10.71505907   7.57550457] [ 11.30995403   7.66379623] [ 11.904849     7.7520879 ]] 
            [[ 11.904849     7.7520879 ] [ 12.59283462   7.8542004 ] [ 13.23922529   7.9571879 ] [ 13.84389239   8.06038575]] 
            [[ 13.84389239   8.06038575] [ 14.4485595    8.1635836 ] [ 15.01150304   8.26699181] [ 15.53259443   8.36994572]] 
            [[ 15.53259443   8.36994572] [ 16.5747772    8.57585353] [ 17.44955134   8.77994416] [ 18.15588806   8.97690042]] 
            [[ 18.15588806   8.97690042] [ 19.5685615    9.37081292] [ 20.30748525   9.73618794] [ 20.364429    10.03048795]] 
            [[ 20.364429    10.03048795] [ 20.42137275  10.32478796] [ 19.7963365   10.54801297] [ 18.48108994  10.65762548]] 
            [[ 18.48108994  10.65762548] [ 17.82346666  10.71243174] [ 16.9932908   10.73883487] [ 15.98953357  10.73151768]] 
            [[ 15.98953357  10.73151768] [ 15.48765496  10.72785909] [ 14.942381    10.71577042] [ 14.35358311  10.69458702]] 
            [[ 14.35358311  10.69458702] [ 13.76478521  10.67340362] [ 13.13246338  10.6431255 ] [ 12.456489    10.603088  ]]
            [[ 12.456489    10.603088  ] [ 11.5743953   10.5508505 ] [ 10.773473    10.50795519] [ 10.0463556   10.47511437]] 
            [[ 10.0463556   10.47511437] [  9.31923819  10.44227355] [  8.66592569  10.41948722] [  8.07905157  10.40746769]] 
            [[  8.07905157  10.40746769] [  6.90530335  10.38342862] [  5.9973087   10.40245675] [  5.2961356   10.4702505 ]] 
            [[  5.2961356   10.4702505 ] [  3.8937894   10.605838  ] [  3.3187294   10.936488  ] [  3.0994994   11.507788  ]] 
            [[  3.0994994   11.507788  ] [  2.7984494   12.292288  ] [  1.8771294   12.934188  ] [  1.0521294   12.934188  ]] 
            [[  1.0521294   12.934188  ] [  0.09075942  12.934188  ] [ -0.22838058  12.362188  ] [  0.16338942  11.341288  ]]])


(def node-dirs [84.165844212375006 105.60996382124588 102.69721650297102 101.68393437076001 105.78734626888024 130.58943584453931 13.325556885666316 69.207236493430827 86.535195126770233 90.0 49.22098033919265 8.4419606783852998 8.4419606783852998 8.4419606783852998 8.7380368650600246 9.7109042679734472 11.707528247740115 19.265450942079525 3.5430880647713252 169.94195483599833 179.79723737177349 2.027250796672412 2.9003735030437339 2.5044061541111899 0.33849415526617577 166.71242177866142 149.92617280540091 102.98815036505357])

(def dir-angles (map angle node-dirs))

(def min-node-dist 0.931594787854)
(def max-node-dist 20.2435223438)

(def nodes (list (map first path1)))

;; group1: 0-1, 26-27, peak: 27
;; group2: 2-10, peak: 6
;; group3: 10-25; peak: 18
